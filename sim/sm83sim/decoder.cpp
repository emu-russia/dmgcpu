#include "sm83.h"
#include "../dmglib/dmglib.h"

// Here we do not use Gekkio names on purpose, so that we can make cross checks without engagement.

namespace sm83
{
	void decoder1(state* st)
	{
		int CLK2 = st->CLK2;
		int *a = st->a;

		st->d[0] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[9]&a[10]&a[13]&a[14]&a[17]&a[18]&a[20]&a[23]&a[24]) : 1) & 1;
		st->d[1] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[9]&a[11]&a[13]&a[14]&a[17]&a[18]&a[20]&a[23]&a[24]) : 1) & 1;
		st->d[2] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[9]&a[11]&a[13]&a[14]&a[17]&a[18]&a[20]&a[23]&a[25]) : 1) & 1;
		st->d[3] = ~(CLK2 ? ~(a[0]&a[2]&((a[5]&a[6])|(a[5]&a[7]&a[15]&a[17]&a[18]))) : 1) & 1;
		st->d[4] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[8]&a[14]&a[17]&a[18]&a[22]&a[25]) : 1) & 1;
		st->d[5] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[8]&a[15]&a[16]&a[18]&a[22]&a[25]) : 1) & 1;
		st->d[6] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[8]&a[14]&a[16]&a[18]&a[22]&a[24]) : 1) & 1;
		st->d[7] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[9]&a[14]&a[16]&a[18]&a[22]&a[24]) : 1) & 1;
		st->d[8] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[9]&a[11]&a[12]&a[14]&a[18]) : 1) & 1;
		st->d[9] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[8]&((a[10]&a[13]&a[15]&a[16])|(a[15]&a[16]&a[18]))&a[20]&a[22]&a[24]) : 1) & 1;
		st->d[10] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[8]&((a[10]&a[13]&a[15]&a[16])|(a[15]&a[16]&a[18]))&a[20]&a[22]&a[25]) : 1) & 1;
		st->d[11] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[8]&((a[10]&a[13]&a[15]&a[16])|(a[15]&a[16]&a[18]))&a[20]&a[23]&a[24]) : 1) & 1;
		st->d[12] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[8]&((a[10]&a[13]&a[15]&a[16])|(a[15]&a[16]&a[18]))&a[20]&a[23]&a[25]) : 1) & 1;
		st->d[13] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[8]&((a[10]&a[13]&a[15]&a[16])|(a[15]&a[16]&a[18]))&a[21]&a[22]&a[24]) : 1) & 1;
		st->d[14] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[15]&a[17]&a[18]) : 1) & 1;
		st->d[15] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[15]&a[17]&a[18]&a[22]&a[24]) : 1) & 1;
		st->d[16] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&((a[13])|(a[10])|(a[8]))&a[15]&a[17]&a[18]&a[22]&a[25]) : 1) & 1;
		st->d[17] = ~(CLK2 ? ~(a[0]&a[2]&a[21]&a[23]&a[24]) : 1) & 1;
		st->d[18] = ~(CLK2 ? ~(a[2]&a[21]&a[23]&a[25]) : 1) & 1;
		st->d[19] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&((a[9]&a[14]&a[16]&a[18])|(a[8]&a[11]&a[13]&a[14]&a[16]&a[18]))&a[22]&a[25]) : 1) & 1;
		st->d[20] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&((a[9]&a[14]&a[16]&a[18])|(a[8]&a[11]&a[13]&a[14]&a[16]&a[18]))&a[22]&a[24]) : 1) & 1;
		st->d[21] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[9]&a[10]&a[13]&a[14]&a[16]&a[18]&a[20]&a[23]&a[24]) : 1) & 1;
		st->d[22] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[9]&a[11]&a[13]&a[14]&a[16]&a[18]&a[23]&a[24]) : 1) & 1;
		st->d[23] = ~(CLK2 ? ~(a[0]&a[3]&a[5]&a[6]&((a[14])|(a[16])|(a[19]))&a[22]&a[24]) : 1) & 1;
		st->d[24] = ~(CLK2 ? ~(a[0]&a[3]&a[5]&a[6]&a[15]&a[17]&a[18]&a[22]&a[25]) : 1) & 1;
		st->d[25] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[8]&a[15]&a[17]&a[19]) : 1) & 1;
		st->d[26] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[13]&a[14]&a[17]&a[18]&a[22]&a[25]) : 1) & 1;
		st->d[27] = ~(CLK2 ? ~(a[0]&a[3]&a[4]&a[7]) : 1) & 1;
		st->d[28] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[12]&a[14]&a[17]&a[18]&a[22]&a[24]) : 1) & 1;
		st->d[29] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[13]&a[14]&a[17]&a[18]&a[22]&a[24]) : 1) & 1;
		st->d[30] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[9]&a[10]&a[12]&a[14]&a[17]&a[18]&a[22]&a[24]) : 1) & 1;
		st->d[31] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[9]&a[10]&a[12]&a[14]&a[16]&a[18]&a[22]&a[24]) : 1) & 1;
		st->d[32] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[9]&a[10]&a[12]&a[14]&a[16]&a[18]&a[22]&a[25]) : 1) & 1;
		st->d[33] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&((a[7]&a[8])|(a[7]&a[10])|(a[7]&a[13]))&a[15]&a[17]&a[18]&a[22]&a[24]) : 1) & 1;
		st->d[34] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[15]&a[17]&a[19]&a[20]) : 1) & 1;
		st->d[35] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[13]&a[14]&a[16]&a[19]&a[24]) : 1) & 1;
		st->d[36] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[13]&a[14]&a[17]&a[19]&a[22]&a[24]) : 1) & 1;
		st->d[37] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[12]&a[14]&a[17]&a[19]&a[22]&a[24]) : 1) & 1;
		st->d[38] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[12]&a[15]&a[16]&a[19]&a[22]&a[25]) : 1) & 1;
		st->d[39] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[12]&a[15]&a[16]&a[19]&a[22]&a[24]) : 1) & 1;
		st->d[40] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[7]&((a[8])|(a[10])|(a[13]))&((a[19])|(a[16])|(a[14]))&a[20]) : 1) & 1;
		st->d[41] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[7]) : 1) & 1;
		st->d[42] = ~(CLK2 ? ~(a[0]&a[3]&a[4]&a[6]) : 1) & 1;
		st->d[43] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[8]&((a[10]&a[12]&a[14]&a[17])|(a[14]&a[17]&a[18]))&a[22]&a[24]) : 1) & 1;
		st->d[44] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[8]&((a[10]&a[12]&a[14]&a[17])|(a[14]&a[17]&a[18]))&a[22]&a[25]) : 1) & 1;
		st->d[45] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[8]&((a[10]&a[12]&a[14]&a[17])|(a[14]&a[17]&a[18]))&a[23]&a[24]) : 1) & 1;
		st->d[46] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[13]&a[14]&a[16]&a[19]&a[22]&a[25]) : 1) & 1;
		st->d[47] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[9]&a[11]&a[12]&a[15]&a[17]&a[18]&a[22]&a[25]) : 1) & 1;
		st->d[48] = ~(CLK2 ? ~(a[24]&a[25]) : 1) & 1;
		st->d[49] = ~(CLK2 ? ~(a[24]&a[25]) : 1) & 1;
		st->d[50] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[12]&a[15]&a[16]&a[19]&a[23]&a[24]) : 1) & 1;
		st->d[51] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[12]&a[14]&a[16]&a[19]&a[22]&a[24]) : 1) & 1;
		st->d[52] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[12]&a[14]&a[16]&a[19]&a[22]&a[25]) : 1) & 1;
		st->d[53] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[9]&a[10]&a[13]&a[14]&a[16]&a[18]&a[20]&a[22]&a[25]) : 1) & 1;
		st->d[54] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[9]&a[11]&a[13]&a[14]&a[16]&a[18]&a[22]&a[25]) : 1) & 1;
		st->d[55] = ~(CLK2 ? ~(a[0]&a[3]&a[5]&a[7]&((a[14])|(a[16])|(a[19]))&a[22]&a[24]) : 1) & 1;
		st->d[56] = ~(CLK2 ? ~(a[0]&a[3]&a[5]&a[7]&a[15]&a[17]&a[18]&a[22]&a[25]) : 1) & 1;
		st->d[57] = ~(CLK2 ? ~(a[0]&a[3]&a[5]&a[15]&a[17]&a[18]&a[22]&a[24]) : 1) & 1;
		st->d[58] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[12]&a[14]&a[16]&a[19]&a[23]&a[24]) : 1) & 1;
		st->d[59] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[9]&a[11]&a[12]&a[14]&a[16]&a[18]&a[22]&a[25]) : 1) & 1;
		st->d[60] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[8]&a[10]&a[13]&a[14]&a[16]&a[18]&a[20]&a[23]&a[24]) : 1) & 1;
		st->d[61] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[8]&a[10]&a[13]&a[14]&a[16]&a[18]&a[20]&a[22]&a[24]) : 1) & 1;
		st->d[62] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[9]&a[11]&a[13]&a[14]&a[16]&a[19]&a[22]&a[24]) : 1) & 1;
		st->d[63] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[9]&a[10]&a[13]&a[14]&a[16]&a[18]&a[20]&a[22]&a[24]) : 1) & 1;
		st->d[64] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[9]&a[10]&a[13]&a[14]&a[16]&a[18]&a[20]&a[23]&a[25]) : 1) & 1;
		st->d[65] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[9]&a[11]&a[13]&a[14]&a[16]&a[18]&a[22]&a[24]) : 1) & 1;
		st->d[66] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[8]&a[10]&a[13]&a[14]&a[16]&a[18]&a[20]&a[23]&a[25]) : 1) & 1;
		st->d[67] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[8]&a[10]&a[13]&a[14]&a[16]&a[18]&a[20]&a[22]&a[25]) : 1) & 1;
		st->d[68] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[7]&a[9]&a[11]&a[12]&((a[19])|(a[16])|(a[14]))&a[22]&a[24]) : 1) & 1;
		st->d[69] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[9]&a[11]&a[12]&a[15]&a[16]&a[22]&a[24]) : 1) & 1;
		st->d[70] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[9]&a[11]&a[12]&a[15]&a[16]&a[22]&a[25]) : 1) & 1;
		st->d[71] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[9]&a[11]&a[12]&a[14]&a[17]&a[18]&a[22]&a[24]) : 1) & 1;
		st->d[72] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[9]&a[11]&a[12]&a[14]&a[16]&a[18]&a[22]&a[24]) : 1) & 1;
		st->d[73] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[15]&a[17]&a[19]&a[22]&a[25]) : 1) & 1;
		st->d[74] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[15]&a[17]&a[19]&a[22]&a[24]) : 1) & 1;
		st->d[75] = ~(CLK2 ? ~(a[1]&a[2]&a[21]&a[22]&a[25]) : 1) & 1;
		st->d[76] = ~(CLK2 ? ~(a[1]&a[2]&a[21]&a[22]&a[24]) : 1) & 1;
		st->d[77] = ~(CLK2 ? ~(a[1]&a[2]&a[20]&a[22]&a[24]) : 1) & 1;
		st->d[78] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[6]&((a[16])|(a[14])|(a[19]))&a[20]) : 1) & 1;
		st->d[79] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[8]&a[13]&a[14]&a[16]&a[19]&a[22]&a[24]) : 1) & 1;
		st->d[80] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[8]&a[14]&a[16]&a[18]&a[22]&a[25]) : 1) & 1;
		st->d[81] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[9]&a[10]&a[13]&a[14]&a[16]&a[19]&a[20]) : 1) & 1;
		st->d[82] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[8]&((a[13]&a[14]&a[16])|(a[14]&a[16]&a[18]))&a[20]&a[23]&a[24]) : 1) & 1;
		st->d[83] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[8]&((a[13]&a[14]&a[16])|(a[14]&a[16]&a[18]))&a[20]&a[23]&a[25]) : 1) & 1;
		st->d[84] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[9]&a[10]&a[14]&a[17]&a[18]&a[22]&a[24]) : 1) & 1;
		st->d[85] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[9]&a[11]&a[14]&a[17]&a[18]&a[22]&a[24]) : 1) & 1;
		st->d[86] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[12]&a[14]&a[16]&a[19]&a[22]&a[24]) : 1) & 1;
		st->d[87] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[12]&a[14]&a[16]&a[19]&a[22]&a[25]) : 1) & 1;
		st->d[88] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[12]&a[14]&a[16]&a[19]&a[23]&a[24]) : 1) & 1;
		st->d[89] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&((a[13])|(a[10])|(a[8]))&a[15]&a[16]&a[20]) : 1) & 1;
		st->d[90] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[6]&a[15]&a[17]&a[18]&a[22]&a[24]) : 1) & 1;
		st->d[91] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[15]&a[17]&a[18]&a[22]&a[24]) : 1) & 1;
		st->d[92] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[15]&a[17]&a[19]&a[23]&a[24]) : 1) & 1;
		st->d[93] = ~(CLK2 ? ~(a[1]&a[2]&a[21]&a[23]&a[24]) : 1) & 1;
		st->d[94] = ~(CLK2 ? ~(a[0]&a[3]&((a[19])|(a[14])|(a[16]))&a[20]) : 1) & 1;
		st->d[95] = ~(CLK2 ? ~(a[0]&a[3]&a[15]&a[17]&a[18]&a[22]&a[24]) : 1) & 1;
		st->d[96] = ~(CLK2 ? ~(a[0]&a[3]&a[4]&a[7]&a[15]&a[17]&a[18]&a[22]&a[25]) : 1) & 1;
		st->d[97] = ~(CLK2 ? ~(a[0]&a[3]&a[6]&a[15]&a[17]&a[18]&a[22]&a[25]) : 1) & 1;
		st->d[98] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[15]&a[16]) : 1) & 1;
		st->d[99] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[9]&a[11]&a[14]&a[17]&a[19]&a[20]) : 1) & 1;
		st->d[100] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[7]&a[9]&a[11]&a[12]&a[15]&a[17]&a[18]&a[20]) : 1) & 1;
		st->d[101] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&a[8]&a[12]&a[14]&a[16]&a[18]&a[20]) : 1) & 1;
		st->d[102] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[8]&a[10]&a[13]&a[14]&a[17]&a[19]&a[20]) : 1) & 1;
		st->d[103] = ~(CLK2 ? ~(a[0]&a[2]&a[4]&a[6]&((a[8]&a[11]&a[13]&a[14]&a[16]&a[18])|(a[9]&a[14]&a[16]&a[18]))&a[23]&a[24]) : 1) & 1;
		st->d[104] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[9]&a[13]&a[14]&a[17]&a[18]&a[20]&a[22]&a[24]) : 1) & 1;
		st->d[105] = ~(CLK2 ? ~(a[0]&a[2]&a[5]&a[7]&a[9]&a[13]&a[14]&a[17]&a[18]&a[20]&a[22]&a[25]) : 1) & 1;
		st->d[106] = ~(CLK2 ? ~(a[24]&a[25]) : 1) & 1;
	}

	void decoder2(state* st)
	{
		int CLK2 = st->CLK2;
		int* d = st->d;
		int IR7 = st->IR[7];
		int SeqOut_2 = st->SeqOut_2;

		// Automagically generated by MakeNorTree py 
 
		st->w[0] = ~(CLK2 ? ~((d[4]|d[5]|d[6]|d[7])) : 1) & 1;
		st->w[27] = ~(CLK2 ? ~((d[60] | d[66])) : 1) & 1;			// ⚠️ required by w1
		st->w[1] = ~(CLK2 ? ~((d[0]|d[1]|st->w[27])) : 1) & 1;
		st->w[4] = ~(CLK2 ? ~((d[0]|d[28])) : 1) & 1;
		st->w[5] = ~(CLK2 ? ~((d[2]|d[26])) : 1) & 1;
		st->w[6] = ~(CLK2 ? ~((d[0]|d[12]|d[13]|d[24]|d[28]|d[30]|d[32]|d[38]|d[47]|d[50]|d[56]|d[60]|d[66]|d[68]|d[70]|d[73]|d[75]|d[92]|d[93]|d[97])) : 1) & 1;
		st->w[9] = ~(CLK2 ? ~((d[21]|d[22])) : 1) & 1;
		st->w[10] = ~(CLK2 ? ~((d[23]|d[24])) : 1) & 1;
		st->w[11] = ~(CLK2 ? ~((d[32]|d[59]|d[0]|d[1]|d[2]|d[9]|d[10]|d[12]|d[13]|d[15]|d[16]|d[17]|d[18]|d[20]|d[22]|d[23]|d[24]|d[26]|d[28]|d[29]|d[30]|d[31]|d[33]|d[34]|d[38]|d[40]|d[43]|d[44]|d[46]|d[47]|d[50]|d[51]|d[52]|d[55]|d[56]|d[57]|d[58]|d[60]|d[61]|d[63]|d[64]|d[65]|d[66]|d[67]|d[68]|d[69]|d[70]|d[71]|d[72]|d[73]|d[75]|d[78]|d[79]|d[80]|d[81]|d[82]|d[86]|d[87]|d[88]|d[89]|d[90]|d[91]|d[92]|d[93]|d[94]|d[95]|d[96]|d[97]|d[99]|d[100]|d[101]|d[102]|d[103]|d[104]|d[105])) : 1) & 1;
		st->w[13] = ~(CLK2 ? ~((d[28]|d[29])) : 1) & 1;
		st->w[14] = ~(CLK2 ? ~((d[30]|d[32])) : 1) & 1;
		st->w[16] = ~(CLK2 ? ~((d[36]|d[37])) : 1) & 1;
		st->w[17] = ~(CLK2 ? ~((d[32]|d[59])) : 1) & 1;
		st->w[18] = ~(CLK2 ? ~((d[1]|d[9]|d[10]|d[15]|d[20]|d[29]|d[31]|d[33]|d[43]|d[44]|d[51]|d[52]|d[57]|d[59]|d[61]|d[63]|d[65]|d[67]|d[69]|d[71]|d[72]|d[79]|d[80]|d[82]|d[86]|d[87]|d[90]|d[91]|d[95]|d[104]|d[105])) : 1) & 1;
		st->w[20] = ~(CLK2 ? ~((d[0]|d[1]|d[6]|d[9]|d[11]|d[13]|d[15]|d[20]|d[21]|d[24]|d[28]|d[29]|d[30]|d[31]|d[32]|d[35]|d[36]|d[37]|d[39]|d[43]|d[45]|d[47]|d[50]|d[51]|d[56]|d[57]|d[60]|d[61]|d[62]|d[63]|d[65]|d[66]|d[68]|d[69]|d[70]|d[72]|d[74]|d[76]|d[82]|d[83]|d[86]|d[92]|d[93]|d[95]|d[97]|d[104])) : 1) & 1;
		st->w[22] = ~(CLK2 ? ~((d[24]|d[33]|d[47]|d[56]|d[57]|d[62]|d[68]|d[69]|d[70]|d[81]|d[90]|d[95]|d[97])) : 1) & 1;
		st->w[23] = ~(CLK2 ? ~((d[53]|d[54])) : 1) & 1;
		st->w[24] = ~(CLK2 ? ~((d[55]|d[56])) : 1) & 1;
		st->w[25] = ~(CLK2 ? ~((d[2]|d[9]|d[10]|d[15]|d[16]|d[17]|d[18]|d[20]|d[22]|d[23]|d[26]|d[31]|d[34]|d[40]|d[43]|d[44]|d[46]|d[55]|d[58]|d[61]|d[63]|d[64]|d[65]|d[67]|d[72]|d[77]|d[78]|d[86]|d[87]|d[88]|d[89]|d[91]|d[94]|d[96]|d[99]|d[100]|d[101]|d[102]|d[104]|d[105])) : 1) & 1;
		st->w[26] = ~(CLK2 ? ~((d[2]|d[16]|d[17]|d[18]|d[22]|d[23]|d[26]|d[34]|d[40]|d[46]|d[55]|d[58]|d[64]|d[78]|d[81]|d[88]|d[89]|d[94]|d[96]|d[99]|d[100]|d[101]|d[102]|d[103])) : 1) & 1;
		// ⚠️ w27 is evaluated beforehand
		st->w[28] = ~(CLK2 ? ~((d[12]|d[73]|d[75])) : 1) & 1;
		st->w[29] = ~(CLK2 ? ~((d[30]|d[71])) : 1) & 1;
		st->w[30] = ~(CLK2 ? ~((d[11]|d[12]|d[13]|d[38]|d[39]|d[50]|d[51]|d[52]|d[73]|d[74]|d[75]|d[76]|d[79]|d[80]|d[82]|d[92]|d[93])) : 1) & 1;
		st->w[31] = ~(CLK2 ? ~((d[2]|d[9]|d[10]|d[15]|d[16]|d[17]|d[18]|d[20]|d[22]|d[23]|d[26]|d[31]|d[34]|d[37]|d[40]|d[43]|d[44]|d[46]|d[51]|d[52]|d[55]|d[58]|d[60]|d[61]|d[63]|d[64]|d[65]|d[67]|d[72]|d[78]|d[79]|d[80]|d[81]|d[82]|d[84]|d[86]|d[87]|d[88]|d[89]|d[91]|d[94]|d[96]|d[99]|d[101]|d[102]|d[103]|d[104]|d[105])) : 1) & 1;
		st->w[32] = ~(CLK2 ? ~((d[0]|d[12]|d[13]|d[24]|d[28]|d[30]|d[32]|d[33]|d[36]|d[37]|d[45]|d[47]|d[50]|d[56]|d[59]|d[62]|d[66]|d[68]|d[70]|d[71]|d[75]|d[76]|d[77]|d[83]|d[90]|d[91]|d[92]|d[93]|d[97])) : 1) & 1;
		st->w[33] = ~(CLK2 ? ~((d[0]|d[1]|d[10]|d[11]|d[13]|d[19]|d[21]|d[24]|d[28]|d[30]|d[32]|d[33]|d[36]|d[37]|d[38]|d[44]|d[45]|d[47]|d[50]|d[52]|d[53]|d[54]|d[56]|d[59]|d[60]|d[62]|d[66]|d[67]|d[68]|d[70]|d[71]|d[73]|d[75]|d[79]|d[80]|d[82]|d[83]|d[87]|d[90]|d[91]|d[92]|d[93]|d[97]|d[105])) : 1) & 1;
		st->w[34] = ~(CLK2 ? ~((d[13]|d[92]|d[93])) : 1) & 1;
		st->w[35] = ~(CLK2 ? ~((d[11]|d[12]|d[36]|d[38]|d[39]|d[73]|d[74]|d[75]|d[76]|d[77]|d[85])) : 1) & 1;
		st->w[36] = ~(CLK2 ? ~((d[13]|d[45]|d[83])) : 1) & 1;
		st->w[38] = ~(CLK2 ? ~((d[2]|d[13]|d[16]|d[17]|d[22]|d[23]|d[26]|d[28]|d[29]|d[34]|d[35]|d[36]|d[37]|d[38]|d[40]|d[45]|d[46]|d[50]|d[53]|d[54]|d[55]|d[58]|d[62]|d[68]|d[70]|d[78]|d[81]|d[88]|d[89]|d[92]|d[93]|d[94]|d[96]|d[97]|d[99]|d[100]|d[101])) : 1) & 1;

		// Does not use NOR tree

		st->w[2] = d[103];
		st->w[3] = d[3];
		st->w[7] = dmglib::Not(IR7);			// Not used
		st->w[8] = d[19];
		st->w[12] = d[27];
		st->w[15] = d[35];
		st->w[19] = d[46];
		st->w[21] = d[50];
		st->w[37] = d[98];
		st->w[39] = dmglib::Not(SeqOut_2);
		st->w[40] = st->w[18] & st->w[39];
	}

	void decoder3(state* st)
	{
		int CLK2 = st->CLK2;
		int CLK4 = st->CLK4;
		int CLK5 = st->CLK5;
		int nCLK4 = st->nCLK4;
		int* a = st->a;
		int* d = st->d;
		int* w = st->w;
		int SeqOut_2 = st->SeqOut_2;
		int* IR = st->IR;
		int* nIR = st->nIR;

		// Automagically generated by MakeNandTree py
		// Hand-corrected in places
 
		st->x[17] = ~(CLK2 ? ~((d[42] & IR[5])) : 1) & 1;
		st->x[20] = ~(CLK2 ? ~((d[25]) | (d[42] & nIR[5])) : 1) & 1;
		st->x[23] = ~(CLK2 ? ~((w[3] & nIR[4] & nIR[5])) : 1) & 1;
		st->x[10] = ~(CLK2 ? ~((w[23]) | (w[15]) | (w[19]) | (st->x[23])) : 1) & 1;
		st->x[24] = ~(CLK2 ? ~((w[3] & IR[4] & nIR[5])) : 1) & 1;
		st->x[27] = ~(CLK2 ? ~((w[3] & IR[3] & IR[4] & IR[5])) : 1) & 1;
		st->x[11] = ~(CLK2 ? ~((st->x[27]) | (st->x[24])) : 1) & 1;
		st->x[22] = ~(CLK2 ? ~((d[34] & nIR[3] & nIR[4] & IR[5])) : 1) & 1;
		st->x[26] = ~(CLK2 ? ~((d[34] & IR[3] & nIR[4] & IR[5])) : 1) & 1;
		st->x[64] = ~(CLK2 ? ~((w[9] & IR[4])) : 1) & 1;
		st->x[66] = ~(CLK2 ? ~((w[23] & IR[4])) : 1) & 1;

		st->x[0] = ~(CLK2 ? ~((nIR[3]&st->x[20]) | (nIR[3]&nIR[4]&st->x[17])) : 1) & 1;
		st->x[1] = ~(CLK2 ? ~((IR[3]&st->x[20]) | (IR[3]&st->x[17])) : 1) & 1;
		st->x[2] = ~(CLK2 ? ~((w[24]) | (IR[5]&IR[4]&nIR[3]&w[3])) : 1) & 1;
		st->x[3] = ~(CLK2 ? ~((st->x[10]) | (w[37]) | (st->x[11]) | (w[8]) | (w[9]) | (st->x[22]) | (w[23])) : 1) & 1;
		st->x[4] = ~(CLK2 ? ~((w[5]) | (d[8]) | (d[41]) | (st->x[2]) | (d[14]) | (st->x[26])) : 1) & 1;
		st->x[5] = ~(CLK2 ? ~((st->x[20]&nIR[3]&nIR[4])) : 1) & 1;
		st->x[6] = ~(CLK2 ? ~((st->x[20]&nIR[3]&IR[4])) : 1) & 1;
		st->x[7] = ~(CLK2 ? ~((st->x[20]&IR[3]&nIR[4])) : 1) & 1;
		st->x[8] = ~(CLK2 ? ~((st->x[20]&IR[3]&IR[4])) : 1) & 1;
		st->x[9] = ~(CLK2 ? ~((st->x[17]&IR[3]&nIR[4])) : 1) & 1;
		// ⚠️ x10 is evaluated beforehand
		// ⚠️ x11 is evaluated beforehand
		st->x[12] = ~(CLK2 ? ~((st->x[24]) | (st->x[27]) | (IR[0]&w[37])) : 1) & 1;
		st->x[13] = ~(CLK2 ? ~((d[58]) | (d[88]) | (w[16])) : 1) & 1;
		st->x[14] = ~(CLK2 ? ~((d[41]) | (d[14]) | (w[37])) : 1) & 1;

		// CLK4 [!]
		st->x[15] = ~(CLK4 ? ~((w[6]&d[41]) | (w[6]&w[4]) | (w[6]&d[14]) | (w[6]&d[38]) | (w[6]&w[14]) | (w[6]&w[21])) : 1) & 1;

		st->x[16] = ~(CLK2 ? ~((st->x[17]&nIR[3]&IR[4])) : 1) & 1;
		// ⚠️ x17 is evaluated beforehand
		st->x[18] = ~(CLK2 ? ~((w[3]&IR[3]&nIR[4]&IR[5])) : 1) & 1;
		st->x[19] = ~(CLK2 ? ~((w[10]) | (nIR[3]&nIR[4]&IR[5]&w[3])) : 1) & 1;
		// ⚠️ x20 is evaluated beforehand
		st->x[21] = ~(CLK2 ? ~((d[34]&IR[4]&IR[5])) : 1) & 1;
		// ⚠️ x22 is evaluated beforehand
		// ⚠️ x23 is evaluated beforehand
		// ⚠️ x24 is evaluated beforehand
		st->x[25] = ~(CLK2 ? ~((w[12]) | (st->x[24]) | (st->x[26]) | (st->x[27])) : 1) & 1;
		// ⚠️ x26 is evaluated beforehand
		// ⚠️ x27 is evaluated beforehand

		// CLK4 [!]
		st->x[28] = ~(CLK4 ? ~((d[34]&w[38]) | (d[42]&w[38]) | (w[3]&w[38]) | (IR[4]&IR[5]&d[58]&w[38]) | (st->x[10]&w[38])) : 1) & 1;
		st->x[29] = ~(CLK4 ? ~((w[12]&w[38]) | (st->x[28]&w[38]) | (w[37]&w[38])) : 1) & 1;

		st->x[30] = ~(CLK2 ? ~((w[9]&nIR[4])) : 1) & 1;
		st->x[31] = ~(CLK2 ? ~((w[23]&nIR[4])) : 1) & 1;
		st->x[32] = ~(CLK2 ? ~((d[34]&nIR[4]) | (d[34]&nIR[5])) : 1) & 1;
		st->x[33] = ~(CLK2 ? ~((IR[0]&w[37])) : 1) & 1;
		st->x[34] = ~(CLK2 ? ~((w[3]) | (d[41]) | (st->a[3])) : 1) & 1;
		st->x[35] = ~(CLK2 ? ~((st->x[34]&IR[0]&IR[1]&IR[2]) | (w[14]) | (w[4]) | (w[37]&IR[3]&IR[4]&IR[5]) | (d[38]&IR[4]&IR[5]) | (st->x[32])) : 1) & 1;
		st->x[36] = ~(CLK2 ? ~((d[42]) | (w[10]) | (w[24])) : 1) & 1;

		// CLK4 [!]
		st->x[37] = ~(CLK4 ? ~((w[8]) | (w[6]&d[42]) | (w[6]&w[10]) | (w[6]&w[37]) | (w[6]&w[24]) | (st->x[30]) | (st->x[31])) : 1) & 1;
		st->x[38] = ~(CLK4 ? ~((st->x[32]&w[38]) | (st->x[36]&IR[0]&IR[1]&IR[2]&w[38]) | (w[38]&d[8]) | (w[38]&w[5]) | (w[38]&st->x[14]&IR[3]&IR[4]&IR[5]) | (w[38]&d[58]&IR[4]&IR[5]) | (w[38]&w[3]&nIR[5]) | (w[38]&w[3]&nIR[4]) | (w[38]&w[3]&nIR[3])) : 1) & 1;
		st->x[39] = ~(CLK4 ? ~((IR[5]&w[13]&w[38]) | (st->x[36]&nIR[0]&nIR[1]&IR[2]&w[38]) | (w[38]&st->x[64]) | (w[38]&w[19]) | (w[38]&st->x[14]&nIR[3]&nIR[4]&IR[5]) | (w[38]&st->x[13]&nIR[4]&IR[5])) : 1) & 1;
		st->x[40] = ~(CLK4 ? ~((IR[5]&w[13]&w[38]) | (st->x[36]&IR[0]&nIR[1]&IR[2]&w[38]) | (w[38]&st->x[66]) | (w[38]&w[15]) | (w[38]&st->x[14]&IR[3]&nIR[4]&IR[5]) | (w[38]&st->x[13]&nIR[4]&IR[5])) : 1) & 1;

		st->x[41] = ~(CLK2 ? ~((d[83]&IR[0]&IR[4])) : 1) & 1;
		st->x[42] = ~(CLK2 ? ~((w[13]&IR[5]) | (w[16]&nIR[4]&IR[5]) | (w[22])) : 1) & 1;
		st->x[43] = ~(CLK2 ? ~((st->x[34]&nIR[0]&nIR[1]&IR[2]) | (IR[5]&nIR[4]&d[38]) | (IR[5]&nIR[4]&w[19]) | (IR[5]&nIR[4]&nIR[3]&w[37])) : 1) & 1;
		st->x[44] = ~(CLK2 ? ~((st->x[34]&IR[0]&nIR[1]&IR[2]) | (IR[5]&nIR[4]&w[21]) | (IR[5]&nIR[4]&w[15]) | (IR[5]&nIR[4]&IR[3]&w[37])) : 1) & 1;
		st->x[45] = ~(CLK2 ? ~((IR[4]&nIR[5]&w[16]) | (IR[4]&nIR[5]&w[13])) : 1) & 1;
		st->x[46] = ~(CLK2 ? ~((st->x[34]&nIR[0]&IR[1]&nIR[2]) | (nIR[5]&IR[4]&d[38]) | (nIR[5]&IR[4]&w[19]) | (nIR[5]&IR[4]&nIR[3]&w[37])) : 1) & 1;
		st->x[47] = ~(CLK2 ? ~((st->x[34]&IR[0]&IR[1]&nIR[2]) | (nIR[5]&IR[4]&w[21]) | (nIR[5]&IR[4]&w[15]) | (nIR[5]&IR[4]&IR[3]&w[37])) : 1) & 1;
	
		// CLK4 [!]
		st->x[48] = ~(CLK4 ? ~((st->x[36]&nIR[0]&IR[1]&nIR[2]&w[38]) | (IR[4]&nIR[5]&st->x[13]&w[38]) | (IR[4]&nIR[5]&st->x[14]&nIR[3]&w[38])) : 1) & 1;
		st->x[49] = ~(CLK4 ? ~((st->x[36]&nIR[0]&nIR[1]&nIR[2]&w[38]) | (nIR[4]&nIR[5]&st->x[13]&w[38]) | (nIR[4]&nIR[5]&st->x[14]&nIR[3]&w[38])) : 1) & 1;
		st->x[50] = ~(CLK4 ? ~((st->x[36]&IR[0]&IR[1]&nIR[2]&w[38]) | (IR[4]&nIR[5]&st->x[13]&w[38]) | (IR[4]&nIR[5]&st->x[14]&IR[3]&w[38])) : 1) & 1;
		st->x[51] = ~(CLK4 ? ~((st->x[36]&IR[0]&nIR[1]&nIR[2]&w[38]) | (nIR[4]&nIR[5]&st->x[13]&w[38]) | (nIR[4]&nIR[5]&st->x[14]&IR[3]&w[38])) : 1) & 1;

		st->x[52] = ~(CLK2 ? ~((w[29]) | (nIR[4]&nIR[5]&w[13]) | (nIR[4]&nIR[5]&w[16])) : 1) & 1;
		st->x[53] = ~(CLK2 ? ~((st->x[34]&nIR[0]&nIR[1]&nIR[2]) | (nIR[4]&nIR[5]&d[38]) | (nIR[4]&nIR[5]&w[19]) | (nIR[4]&nIR[5]&nIR[3]&w[37])) : 1) & 1;
		st->x[54] = ~(CLK2 ? ~((st->x[34]&IR[0]&nIR[1]&nIR[2]) | (nIR[4]&nIR[5]&w[21]) | (nIR[4]&nIR[5]&w[15]) | (nIR[4]&nIR[5]&IR[3]&w[37])) : 1) & 1;

		// CLK4 for x56, x55 affected by CLK5, x57 affected by nCLK4 [!]
		st->x[55] = ~( (CLK2 ? ~((w[13]) | (w[16])) : 1) | CLK5 ) & 1;
		st->x[56] = ~(CLK4 ? ~((d[58]) | (d[88])) : 1) & 1;
		st->x[57] = ~( (CLK2 ? ~((d[42]) | (st->x[64]) | (st->x[66]) | (w[5]) | (d[8]) | (w[15]) | (w[19]) | (st->x[14]) | (w[10]) | (w[24]) | (st->x[32]) | (w[3])) : 1) | nCLK4 ) & 1;

		st->x[58] = ~(CLK2 ? ~((w[8]) | (nIR[3]&IR[4]&IR[5]&w[37]) | (w[23]) | (d[8]) | (w[5]) | (d[14]) | (st->x[34]&nIR[0]&IR[1]&IR[2])) : 1) & 1;
		st->x[59] = ~(CLK2 ? ~((st->x[30]) | (d[60]) | (w[18]&SeqOut_2) | (w[8])) : 1) & 1;
		st->x[60] = ~(CLK2 ? ~((w[8]) | (w[17]) | (w[39]&w[18]) | (d[60]) | (st->x[31])) : 1) & 1;
		st->x[62] = ~(CLK2 ? ~((w[16] & IR[4] & IR[5]) | (w[30]) | (d[62])) : 1) & 1;		// ⚠️
		st->x[63] = ~(CLK2 ? ~((d[88] & IR[4] & IR[5]) | (d[64])) : 1) & 1;			// ⚠️
		st->x[61] = ~(CLK2 ? ~((st->x[62]) | (st->x[63])) : 1) & 1;
		// ⚠️ x62 is evaluated beforehand
		// ⚠️ x63 is evaluated beforehand
		// ⚠️ x64 is evaluated beforehand
		st->x[65] = ~(CLK2 ? ~((w[30]) | (w[16]&IR[4]&IR[5])) : 1) & 1;
		// ⚠️ x66 is evaluated beforehand
		st->x[67] = ~(CLK2 ? ~((d[81]) | (w[25]) | (w[2])) : 1) & 1;
		st->x[68] = ~(CLK2 ? ~((d[93]) | (d[92]) | (w[36]) | (st->x[67])) : 1) & 1;
	}
}